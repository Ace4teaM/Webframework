<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--
(C)2012-ID-Informatik
Catalogue générique
*********************************************************************************************************************** 
    Attention:                                                                                                             
    Ce document est géneré par un template intermédiaire, toutes modifications manuelle risques d'être perdu
***********************************************************************************************************************
-->

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:template="http://www.webframework.fr/last/xmlns/template" xml:lang="fr" lang="fr" dir="ltr">
<head>
<title>Galerie web</title>

<meta http-equiv="wfw.page-id" content="catalog_items" /><!-- page identifier -->

<!-- Includes -->
<script type="text/javascript" language="javascript" src="wfw/javascript/base.js"></script>
<script type="text/javascript" language="javascript" src="wfw/javascript/dom.js"></script>
<script type="text/javascript" language="javascript" src="wfw/javascript/dom-func-compatible.js"></script>
<script type="text/javascript" language="javascript" src="wfw/javascript/wfw.js"></script>
<script type="text/javascript" language="javascript" src="wfw/javascript/wfw-extends.js"></script>

<script name="head" type="text/javascript" language="javascript">
// <![CDATA[
    wfw.event.SetCallback( // window
    "wfw_window",
    "load",
    "onLoadForm",
    function () {
        //recupere les infos sur l'album
        var param = {
            "onsuccess": function (obj, args) {
                delete (args["result"]);
                delete (args["error"]);
                var item_guid;
                for (item_guid in args) {
                    var param = {
                        "onsuccess": function (obj2, args2) {
                            args2["_src_"] = $value("_data_path_") + "/" + args2["image_thumbnail"];
                            wfw.puts(args2["_src_"]);
                            wfw.template.insert($doc("image_thumb"), $doc("image_list"), args2, null, null, null);
                        }
                    };
                    var fields = {
                        "wfw_client_id": $value("_client_id_"),
                        "item_guid": item_guid
                    };
                    wfw.request.Add(null, "req/catalog/get_item.php", fields, wfw.utils.onCheckRequestResult_XARG, param, false);
                }
            }
        };
        var fields = {
            "wfw_client_id": $value("_client_id_"),
            "wfw_item_id": "image"/*,
            "image": "^.",
            "image_thumbnail": "^."*/
        };
        wfw.request.Add(null, "req/catalog/list_item.php", fields, wfw.utils.onCheckRequestResult_XARG, param, false);
    }
);


// ]]>
</script>
</head>

<!-- Document -->
<body>

<div name="content">
    <h2>-{name}</h2>
    <p>-{desc}</p>
    <div id="image_list"></div>
    
    <!-- templates -->
    <div class="wfw_hidden" template:action="ignore">
        <div id="image_thumb" template:action="ignore" style="width:70px; height:70px; text-align:center; vertical-align:middle; display:inline-block; padding:1px 1px 1px 1px; margin:5px 5px 5px 5px; background-color:White; border:8px solid black;">
            <!-- miniatures -->
            <img src="-{_src_}" width="70px" alt="-{name}" style="vertical-align:middle; margin-top:auto; margin-bottom:auto;" />
            <input type="hidden" name="image" value="-{image}"/>
            <input type="hidden" name="image_thumbnail" value="-{image_thumbnail}"/>
        </div>
    </div>

    <!-- globals fields -->
    <input type="hidden" id="_catalog_guid_" value="-{_catalog_guid_}"/>
    <input type="hidden" id="_client_id_" value="-{_client_id_}"/>
    <input type="hidden" id="_data_path_" value="-{_data_path_}"/>
</div>

</body>

</html>
